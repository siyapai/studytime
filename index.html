<html>
  <head>
    <title>ตารางเรียน</title>
    <meta http-equiv=Content-Type content="text/html; charset=utf-8">

    <link href="https://fonts.googleapis.com/css2?family=Fahkwang:wght@400&amp;family=Sarabun:wght@400&amp;display=swap" rel="stylesheet">

    <style type="text/css">
      body{
		font-family: 'Sarabun', sans-serif;
      }

	table {
    border-collapse: collapse;
    width:80%;
}

th, td {
    text-align: left;
    padding: 8px;
    border: 1px solid black;
}

tr:nth-child(even){background-color:#}

th {
    background-color: #4CAF50;
    color: white;
}
  </style>
</head>

    <body>
      <center><font size="2" color="#ff0000">**ตารางเรียน**</font>
      </center>  <br>
      <div style="font-size:14pt;"><div align="center">4/11<br>
      <span id="countdown" style="font-size:14pt; color:blue;"></span></div></div><center>
      <table width="80%" border="1" cellspacing="0">






    	<tbody><tr>
    		<td>&nbsp;&nbsp;</td>
        <td bgcolor="#ffccff">คาบ1<br><font color="#0066ff">8.30-<br>9.20</font></td>
        <td bgcolor="#ffccff">คาบ2<br><font color="#0066ff">9.20-<br>10.10</font></td>
        <td bgcolor="#ffccff">คาบ3<br><font color="#0066ff">10.10-<br>11.00</font></td>
        <td bgcolor="#ffccff">คาบ4<br><font color="#0066ff">11.00-<br>11.50</font></td>
        <td bgcolor="#ffccff">คาบ5<br><font color="#0066ff">11.50-<br>12.40</font></td>
        <td bgcolor="#ffccff">คาบ6<br><font color="#0066ff">12.40-<br>13.30</font></td>
        <td bgcolor="#ffccff">คาบ7<br><font color="#0066ff">13.30-<br>14.20</font></td>
        <td bgcolor="#ffccff">คาบ8<br><font color="#0066ff">14.20-<br>15.10</font></td>
        <td bgcolor="#ffccff">คาบ9<br><font color="#0066ff">15.10-<br>16.00</font></td>
        <td bgcolor="#ffccff">คาบ10<br><font color="#0066ff">00.00-<br>00.00</font></td>
    </tr>

    <tr>
    	<td bgcolor="#ffff00">จันทร์</td>
    	<td>
          ว30241<br>อ.คมขำ<br>115<br>	</td>
    	<td>
          ว30231<br>อ.วรัทยา<br>113<br>	</td>
    	<td>
          ง31101<br>อ.จิราวัฒน์<br>631<br>
    	</td>
    	<td>
          ค31102<br>อ.อนิรุทธ์<br>444<br>
    	</td>
    	<td>
    			พักกลางวัน<br>
    	</td>
    	<td>
          ค31202<br>อ.กรวิกรานต์<br>433<br>
    	</td>
    	<td>
          ว30194<br>อ.เกียรติศักดิ์<br>541<br>
    	</td>

    	<td>
    		  อ31204<br>อ.Jay - an<br>923<br>
    	</td>

    	<td>
    			<br>
    	</td>

      <td>
          <br>
      </td>
    </tr>
    <tr>
    	<td bgcolor="pink">อังคาร</td>
    	<td>
          ว30221<br>อ.วรายุทธ<br>122<br>	</td>
    	<td>
          ว30221<br>อ.วรายุทธ<br>122<br>	</td>
    	<td>
          ว31293<br>อ.ภูธเนศ<br>543<br>
    	</td>
    	<td>
    			ว31293<br>อ.ภูธเนศ<br>543<br>
    	</td>
    	<td>
    			พักกลางวัน<br>
    	</td>
    	<td>
          ท31102<br>อ.พิชญ์สินี<br>923<br>
    	</td>
    	<td>
          ส31104<br>อ.สุรัญญา<br>411<br>
    	</td>

    	<td>
          อ31102<br>อ.ปาณิศา<br>943<br>
    	</td>

    	<td>
          ชุมนุม<br>
    	</td>

      <td>
          <br>
      </td>
    </tr>
    <tr>
    	<td bgcolor="#33cc00">พุธ</td>
    	<td>
          ท31102<br>อ.พิชญ์สินี<br>923<br>	</td>
    	<td>
          ค31102<br>อ.อนิรุทธ์<br>444<br>	</td>
    	<td>
          ว30231<br>อ.วรัทยา<br>235<br>
    	</td>
    	<td>
          ว30231<br>อ.วรัทยา<br>235<br>
    	</td>
    	<td>
    			พักกลางวัน<br>
    	</td>
    	<td>
          ก31902<br>อ.ปวีณา<br>532<br>
    	</td>
    	<td>
          ค31202<br>อ.กรวิกรานต์<br>336<br>
    	</td>

    	<td>
          ศ31102<br>อ.จิรรัชช<br>336<br>
    	</td>

    	<td>
          <br>
    	</td>

      <td>
          <br>
      </td>
    </tr>
    <tr>
    	<td bgcolor="#ffcc00">พฤหัส</td>
    	<td>
          ว30221<br>อ.วรายุทธ<br>223<br>	</td>
    	<td>
    			ว30221<br>อ.วรายุทธ<br>223<br>	</td>
    	<td>
          ค31202<br>อ.กรวิกรานต์<br>433<br>
    	</td>
    	<td>
          อ31204<br>อ.Jay - an<br>304<br>
    	</td>
    	<td>
    			พักกลางวัน<br>
    	</td>
    	<td>
          อ31102<br>อ.ปาณิศา<br>943<br>
    	</td>
    	<td>
          ค31102<br>อ.อนิรุทธ์<br>444<br>
    	</td>

    	<td>
          ส31103<br>อ.เชิดชาย<br>415<br>
    	</td>

    	<td>
    			พ31102<br>อ.ทิวาร์<br>612<br>
    	</td>

      <td>
          <br>
      </td>
    </tr>
    <tr>
    	<td bgcolor="#3399ff">ศุกร์</td>
    	<td>
          ว30241<br>อ.คมขำ<br>213<br>	</td>
    	<td>
    			ว30241<br>อ.คมขำ<br>213<br>	</td>
    	<td>
          ว31293<br>อ.ภูธเนศ<br>543<br>
    	</td>
    	<td>
          ว31293<br>อ.ภูธเนศ<br>543<br>
    	</td>
    	<td>
    			พักกลางวัน<br>
    	</td>
    	<td>
          ค31202<br>อ.กรวิกรานต์<br>336<br>
    	</td>
    	<td>
          พ31106<br>อ.คำสิงห์<br>816<br>
    	</td>

    	<td>
          ส31103<br>อ.เชิดชาย<br>411<br>
    	</td>

    	<td>
          ประชุม<br>
    	</td>

      <td>
          <br>
      </td>
    </tr>
    </tbody></table>

    <script>
      function Check_Time() {
        var now = new Date();
        var day = now.getDay();
        var hour = now.getHours();
        var minute = now.getMinutes();
        var currentTime = (hour * 60) + minute;
        var timeSlots = [
          {start: 510, end: 560},
          {start: 560, end: 610},
          {start: 610, end: 660},
          {start: 660, end: 710},
          {start: 710, end: 760},
          {start: 760, end: 810},
          {start: 810, end: 860},
          {start: 860, end: 910},
          {start: 910, end: 960},
          {start: 0, end: 0},
        ];


        var rows = document.getElementsByTagName('tr');

        for (var r = 1; r < rows.length; r++) {
          var allCells = rows[r].getElementsByTagName('td');
          for (var c = 1; c < allCells.length; c++) {
          allCells[c].style.color = "";
          allCells[c].style.fontWeight = "normal";
      }
    }

        if (day>=1 && day<=5) {
          var row = rows[day];
          var cells = row.getElementsByTagName('td');


          for (var i = 0; i < timeSlots.length; i++) {
            if (currentTime >= timeSlots[i].start && currentTime < timeSlots[i].end) {
              var box = cells[i + 1];
              if (box) {
              box.style.color = "blue";
              box.style.fontWeight = "bold";
              }




            }
          }
        }
      }








      function Check_Countdown() {
        var now = new Date();
        var day = now.getDay();
        var hour = now.getHours();
        var minute = now.getMinutes();
        var second = now.getSeconds();
        var currentTime = (hour * 60) + minute;

        var timeSlots = [
          {start: 510, end: 560, label: "08:30"},
          {start: 560, end: 610, label: "09:20"},
          {start: 610, end: 660, label: "10:10"},
          {start: 660, end: 710, label: "11:00"},
          {start: 710, end: 760, label: "11:50"},
          {start: 760, end: 810, label: "12:40"},
          {start: 810, end: 860, label: "13:30"},
          {start: 860, end: 910, label: "14:20"},
          {start: 910, end: 960, label: "15:10"},
          {start: 0, end: 0, label: "00:00"},
        ];

        var display = document.getElementById("countdown");
        var rows = document.getElementsByTagName("tr");
        var dayNames = ["อาทิตย์", "จันทร์", "อังคาร", "พุธ", "พฤหัส", "ศุกร์", "เสาร์"];

        var targetDay = day;
        var targetCol = -1;
        var timeText = "00:00";

        if (day>=1 && day<=5) {
          for (let i = 0; i < timeSlots.length; i++) {
            var cell = rows[day].getElementsByTagName('td')[i + 1];
            var cellText = cell ? cell.innerText.trim() : "";

            var isEmpty = (cellText === "");


            if (currentTime >= timeSlots[i].start && currentTime < timeSlots[i].end) {
                if (!isEmpty) {
                    var currentTotalSec = (currentTime * 60) + second;
                    var diff = (timeSlots[i].end * 60) - currentTotalSec;
                    timeText = formatCountdown(diff);
                    targetCol = i + 1;
                } else {
                    for (var next = i + 1; next < timeSlots.length; next++) {
                        var nextCell = rows[day].getElementsByTagName('td')[next + 1];
                        if (nextCell && nextCell.innerText.trim() !== "") {
                            timeText = timeSlots[next].label;
                            targetCol = next + 1;
                            break;
                        }
                    }
                }
                break;
              }

              else if (currentTime < timeSlots[0].start) {
                  targetCol = 1;
                  timeText = timeSlots[0].label;
                  break;
                }
            }
        }


    if (targetCol === -1) {
        var nextDay = day;
        for (var d = 1; d <= 7; d++) {
            nextDay = (day + d) % 7;
            if (nextDay >= 1 && nextDay <= 5) {
                targetDay = nextDay;
                for (var c = 1; c <= 9; c++) {
                    var nextCell = rows[targetDay].getElementsByTagName('td')[c];
                    if (nextCell && nextCell.innerText.trim() !== "") {
                        targetCol = c;
                        timeText = timeSlots[c-1].label;
                        break;
                    }
                }
                break;
            }
        }
    }

      var subjectData = "";
      if (rows[targetDay] && rows[targetDay].getElementsByTagName('td')[targetCol]) {
        subjectData = rows[targetDay].getElementsByTagName('td')[targetCol].innerHTML;
      }

      display.innerHTML = "<span style='color:red; font-size:12pt; '>" + timeText + "</span><br>" +
                    "<span style='font-size:12pt; color:blue;'>วัน" + dayNames[targetDay] + "</span><br>" +
                    "<span style='font-size:12pt; color:black;'>" + subjectData + "</span>";
}







function formatCountdown(seconds) {
    var m = Math.floor(seconds / 60);
    var s = seconds % 60;
    return (m < 10 ? "0" + m : m) + ":" + (s < 10 ? "0" + s : s);
}


Check_Time();
Check_Countdown();
setInterval(Check_Time, 1000);
setInterval(Check_Countdown, 1000);
    </script>
  </body>
</html>


